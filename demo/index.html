<!doctype html>
<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
    <title>paper-input-autocomplete-chips Demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../../paper-button/paper-button.html">
    <link rel="import" href="../../paper-material/paper-material.html">
    <link rel="import" href="../../iron-icons/iron-icons.html">
    <link rel="import" href="../../iron-icons/social-icons.html">
    <link rel="import" href="../../paper-icon-button/paper-icon-button.html">
    <link rel="import" href="../paper-input-autocomplete.html">
    <link rel="import" href="../paper-input-autocomplete-chips.html">
  </head>
  <style>

    body {
      background-color: darkgrey;
    }

    body > paper-material {
      width: 400px;
      background-color: white;
      padding: 24px;
      margin: 24px;
    }

    paper-material.fixed-paper {
      z-index: 99;
      position: fixed;
      top: 10px;
      right: 24px;
      bottom: 0px;
      margin-bottom: 24px;
      overflow-y: auto;
    }

    paper-chip[data-tag='read-only'] #chip {
      background-color: #FFB74D;
    }

  </style>
  <body unresolved>

    <template is="dom-bind" id="app">
      <paper-material class="demo-paper" style="height: 300px; overflow: auto;">
        <p>An example of <code>&lt;paper-input-autocomplete-chips&gt;</code>:</p>

        <paper-input-autocomplete-chips local-candidates="{{states}}" label="Chips"
          remote-url="http://52.19.90.200:8795/skills">
        </paper-input-autocomplete-chips>
      </paper-material>

      <script>
        window.addEventListener('WebComponentsReady', function() {

          var app = document.querySelector('#app');

          app.onTestAppendSelectedObjects = function () {
            document.getElementById('myAutoCompletePOCUnknownItems').appendSelectedObject({
              text: 'NewItem',
              readOnly: true
            });
          };

          app.onTestSetReadOnlyObjects = function () {
              var autoComplete = document.getElementById('myAutoCompletePOCUnknownItems');

              autoComplete.readOnly = !autoComplete.readOnly;
          };

          app.onTestSetRemoveOnlyObjects = function () {
              var autoComplete = document.getElementById('myAutoCompletePOCUnknownItems');

              autoComplete.removeOnly = !autoComplete.removeOnly;
          };

          app.onSetDefaultValue = function () {
            document.getElementById('myAutoComplete').selectedObject = app.states[0];
          };

          app.onToggleDisabled = function () {
            var $el = document.getElementById('myAutoCompletePOC');
            $el.disabled = !$el.disabled;
          };

          app.onSwitchSuggestionPanelPosition = function () {
            var $el = document.getElementById('myAutoCompletePOC');
            //console.debug($el.suggestionsPosition);
            $el.suggestionsPosition = ($el.suggestionsPosition === 'top') ? 'bottom' : 'top';
          };

          app._allowUnknown_onSelectedObjectsChanged = function (e) {
            //console.debug('[_allowUnknown_onSelectedObjectsChanged]', e.target.selectedObjects);
          };

          app._allowUnknown_onSelectingObject = function (e) {

            if (e.detail.selectedObject.text.indexOf('@') === 0) {
                e.preventDefault();
            }

            if (e.detail.selectedObject.text.indexOf('#') === 0) {
                e.detail.selectedObject.text = e.detail.selectedObject.text.substring(1);
            }
          };

          app.XHRResponseTreatment = function(e){
            var length = e.detail.response.length;

            for(var i = 0; i < length; i++){
              e.detail.response[i].text = e.detail.response[i].t;
              e.detail.response[i].imgUrl = e.detail.response[i].i;
            }
          };

          app._pasteHandler = function( text ){
            return text.match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);
          };

          var autocompletePOC = document.getElementById('myAutoCompletePOC');
        });
      </script>
    </template>
  </body>
</html>
